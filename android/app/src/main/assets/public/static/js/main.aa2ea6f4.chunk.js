(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{196:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=196},300:function(e,t,n){e.exports=n(510)},308:function(e,t,n){},310:function(e,t,n){var a={"./ion-action-sheet-controller_8.entry.js":[519,62],"./ion-action-sheet-ios.entry.js":[520,63],"./ion-action-sheet-md.entry.js":[521,64],"./ion-alert-ios.entry.js":[522,45],"./ion-alert-md.entry.js":[523,46],"./ion-app_8-ios.entry.js":[524,11],"./ion-app_8-md.entry.js":[525,12],"./ion-avatar_3-ios.entry.js":[526,65],"./ion-avatar_3-md.entry.js":[527,66],"./ion-back-button-ios.entry.js":[528,67],"./ion-back-button-md.entry.js":[529,68],"./ion-backdrop-ios.entry.js":[530,54],"./ion-backdrop-md.entry.js":[531,55],"./ion-button_2-ios.entry.js":[532,26],"./ion-button_2-md.entry.js":[533,27],"./ion-card_5-ios.entry.js":[534,69],"./ion-card_5-md.entry.js":[535,70],"./ion-checkbox-ios.entry.js":[536,28],"./ion-checkbox-md.entry.js":[537,29],"./ion-chip-ios.entry.js":[538,71],"./ion-chip-md.entry.js":[539,72],"./ion-col_3.entry.js":[540,85],"./ion-datetime_3-ios.entry.js":[541,20],"./ion-datetime_3-md.entry.js":[542,21],"./ion-fab_3-ios.entry.js":[543,73],"./ion-fab_3-md.entry.js":[544,74],"./ion-img.entry.js":[545,86],"./ion-infinite-scroll_2-ios.entry.js":[546,58],"./ion-infinite-scroll_2-md.entry.js":[547,59],"./ion-input-ios.entry.js":[548,30],"./ion-input-md.entry.js":[549,31],"./ion-item-option_3-ios.entry.js":[550,32],"./ion-item-option_3-md.entry.js":[551,33],"./ion-item_8-ios.entry.js":[552,75],"./ion-item_8-md.entry.js":[553,76],"./ion-loading-ios.entry.js":[554,47],"./ion-loading-md.entry.js":[555,48],"./ion-menu_4-ios.entry.js":[556,14],"./ion-menu_4-md.entry.js":[557,15],"./ion-modal-ios.entry.js":[558,16],"./ion-modal-md.entry.js":[559,17],"./ion-nav_4.entry.js":[560,13],"./ion-popover-ios.entry.js":[561,18],"./ion-popover-md.entry.js":[562,19],"./ion-progress-bar-ios.entry.js":[563,34],"./ion-progress-bar-md.entry.js":[564,35],"./ion-radio_2-ios.entry.js":[565,36],"./ion-radio_2-md.entry.js":[566,37],"./ion-range-ios.entry.js":[567,38],"./ion-range-md.entry.js":[568,39],"./ion-refresher_2-ios.entry.js":[569,60],"./ion-refresher_2-md.entry.js":[570,61],"./ion-reorder_2-ios.entry.js":[571,52],"./ion-reorder_2-md.entry.js":[572,53],"./ion-ripple-effect.entry.js":[573,87],"./ion-route_4.entry.js":[574,40],"./ion-searchbar-ios.entry.js":[575,24],"./ion-searchbar-md.entry.js":[576,25],"./ion-segment_2-ios.entry.js":[577,77],"./ion-segment_2-md.entry.js":[578,78],"./ion-select_3-ios.entry.js":[579,41],"./ion-select_3-md.entry.js":[580,42],"./ion-slide_2-ios.entry.js":[581,56],"./ion-slide_2-md.entry.js":[582,57],"./ion-spinner.entry.js":[583,79],"./ion-split-pane-ios.entry.js":[584,88],"./ion-split-pane-md.entry.js":[585,89],"./ion-tab-bar_2-ios.entry.js":[586,80],"./ion-tab-bar_2-md.entry.js":[587,81],"./ion-tab_2.entry.js":[588,51],"./ion-text.entry.js":[589,82],"./ion-textarea-ios.entry.js":[590,43],"./ion-textarea-md.entry.js":[591,44],"./ion-toast-ios.entry.js":[592,49],"./ion-toast-md.entry.js":[593,50],"./ion-toggle-ios.entry.js":[594,22],"./ion-toggle-md.entry.js":[595,23],"./ion-virtual-scroll.entry.js":[596,90]};function r(e){if(!n.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],r=t[0];return n.e(t[1]).then(function(){return n(r)})}r.keys=function(){return Object.keys(a)},r.id=310,e.exports=r},311:function(e,t,n){var a={"./ion-icon.entry.js":[600,99]};function r(e){if(!n.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],r=t[0];return n.e(t[1]).then(function(){return n(r)})}r.keys=function(){return Object.keys(a)},r.id=311,e.exports=r},509:function(e,t,n){},510:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(49),o=n.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(122),l=n.n(i),c=(n(308),n(7)),u=n(8),p=n(10),d=n(9),m=n(11),h=n(121),f=n(16),y=(n(26),n(27),n(2)),E=n(214),g=function(e){var t=e.component,n=e.state,a=e.actions,s=e.isAuthenticated,o=Object(E.a)(e,["component","state","actions","isAuthenticated"]);return s?r.a.createElement(f.b,Object.assign({},o,{render:function(e){return r.a.createElement(t,Object.assign({},e,{state:n,actions:a}))}})):r.a.createElement(f.a,{to:"/login"})},v=n(603),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).home=function(){n.props.history.push("/")},n.settings=function(){n.props.history.push("/settings")},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.p,null,r.a.createElement(y.G,{color:"primary"},r.a.createElement(y.F,{onClick:this.home,style:{cursor:"pointer"}},this.props.title),this.props.isAuthenticated&&r.a.createElement(y.d,{slot:"end"},r.a.createElement(y.c,{onClick:this.settings},r.a.createElement(y.q,{icon:v.a})))))}}]),t}(a.Component),j=Object(f.g)(b),w=n(604),O=n(605),x=n(606),k=n(607),S=n(608),P=n(609),C=n(610),D=n(611),M=n(612),I=n(613),_=n(614),F=n(615),U=n(616),W=n(617),A=n(618),T=n(619),z=n(620),B=n(621),L={Cafe:w.a,Cash:O.a,Train:x.a,Beer:k.a,Barcode:S.a,Basket:P.a,Book:C.a,Bus:D.a,Car:M.a,Film:I.a,"Ice Cream":_.a,Nutrition:F.a,Pizza:U.a,Plane:W.a,Resturant:A.a,Clothes:T.a,Trophy:z.a,Wine:B.a};function q(e){return L[e]}var Y,N=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).headerFn=function(e,t,n){return t%2===0?"Header "+t:null},n.renderItem=function(e,t){return r.a.createElement(y.s,{style:{cursor:"pointer"},key:t,onClick:function(){n.props.viewExpense(e)}},r.a.createElement(y.q,{slot:"start",icon:q(e.icon)}),r.a.createElement(y.t,null,e.title),r.a.createElement(y.x,{slot:"end"},e.isSaving?"":"-","\xa3"+e.price.toFixed(2)))},n.renderHeader=function(e,t){return r.a.createElement(y.v,{key:t+"header"},r.a.createElement(y.t,null,e.date))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"renderRows",value:function(e){for(var t=[],n="",a=0;a<e.length;a++)e[a].date!==n&&(n=e[a].date,t.push(this.renderHeader(e[a],a))),t.push(this.renderItem(e[a],a));return t}},{key:"render",value:function(){return this.props.expenses.length>0?r.a.createElement(y.u,null,this.renderRows(this.props.expenses)):this.props.appLoading?r.a.createElement(y.s,null,r.a.createElement(y.t,{color:"medium",style:{"text-align":"center"}},r.a.createElement(y.E,null))):r.a.createElement(y.s,null,r.a.createElement(y.t,{color:"medium",style:{"text-align":"center"}},"You don't have any expenses to view"))}}]),t}(a.Component),R=n(622),K=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.m,{vertical:"bottom",horizontal:"end",slot:"fixed"},r.a.createElement(y.n,{onClick:this.props.onClick,disabled:this.props.appLoading},r.a.createElement(y.q,{icon:R.a})))}}]),t}(a.Component),G=Object(f.g)(K),H=n(94),J=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).ionColorPrimary=getComputedStyle(document.documentElement).getPropertyValue("--ion-color-primary"),n.dotStye={fill:n.ionColorPrimary},n.activeDotStyle={stroke:n.ionColorPrimary,strokeWidth:2,fillOpacity:0},n.handleClick=function(){n.props.onClick(n.props.index,n.props.payload)},n.handleMouseOver=function(){n.setState({hover:!0})},n.handleMouseOut=function(){n.setState({hover:!1})},n.state={hover:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,a=this.props.index===this.props.active;return r.a.createElement("svg",{cx:t,cy:n,onClick:this.handleClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},r.a.createElement("circle",{style:this.dotStye,cx:t,cy:n,r:this.state.hover?14:8}),a&&r.a.createElement("circle",{style:this.activeDotStyle,cx:t,cy:n,r:"12"}))}}]),t}(a.Component),V=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).ionColorPrimary=getComputedStyle(document.documentElement).getPropertyValue("--ion-color-primary"),n.handleClick=function(e,t){n.setState({activeDot:e}),n.props.onClick(t)},n.state={activeDot:n.props.data.length-1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.setState({activeDot:this.props.data.length-1})}},{key:"render",value:function(){return r.a.createElement(H.c,{width:"100%",height:100},r.a.createElement(H.b,{data:this.props.data,margin:{top:14,right:14,left:14,bottom:14}},r.a.createElement(H.a,{type:"monotone",dataKey:"total",dot:r.a.createElement(J,{onClick:this.handleClick,active:this.state.activeDot}),animationDuration:500,stroke:this.ionColorPrimary,strokeWidth:3})))}}]),t}(a.Component),$=n(19),Q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).segmentChanged=function(e){var t=e.target.value;t!==n.state.label&&("Year"===t?n.setState({label:"Year",expenses:n.props.state.yearsExpenses,totalSaved:n.props.state.yearsTotal,currentEntry:n.props.state.yearsExpenses[n.props.state.yearsExpenses.length-1]||{total:0,date:""}}):"Month"===t?n.setState({label:"Month",expenses:n.props.state.monthsExpenses,totalSaved:n.props.state.monthsTotal,currentEntry:n.props.state.monthsExpenses[n.props.state.monthsExpenses.length-1]||{total:0,date:""}}):"Week"===t&&n.setState({label:"Week",expenses:n.props.state.weeksExpenses,totalSaved:n.props.state.weeksTotal,currentEntry:n.props.state.weeksExpenses[n.props.state.weeksExpenses.length-1]||{total:0,date:""}}))},n.chartClicked=function(e){n.setState({currentEntry:e})},n.renderSegment=function(){return r.a.createElement(y.A,{onIonChange:function(e){n.segmentChanged(e)},value:n.state.label},r.a.createElement(y.B,{value:"Week"},r.a.createElement(y.t,null,"Week")),r.a.createElement(y.B,{value:"Month"},r.a.createElement(y.t,null,"Month")),r.a.createElement(y.B,{value:"Year"},r.a.createElement(y.t,null,"Year")))},n.renderMobile=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.z,null,r.a.createElement(y.j,null,n.renderSegment())),r.a.createElement(y.z,null,r.a.createElement(y.j,null,r.a.createElement(y.z,null,r.a.createElement(y.i,null,n.state.currentEntry.total<0?"-":"","\xa3"+Math.abs(n.state.currentEntry.total).toFixed(2))),r.a.createElement(y.z,null,r.a.createElement(y.h,null,n.state.currentEntry.date))),r.a.createElement(y.j,null,r.a.createElement(y.z,{"justify-content-end":!0},r.a.createElement(y.i,null,n.state.totalSaved<0?"-":"","\xa3"+Math.abs(n.state.totalSaved).toFixed(2))),r.a.createElement(y.z,{"justify-content-end":!0},r.a.createElement(y.h,null,"Total Saved")))))},n.renderDesktop=function(){return r.a.createElement(y.z,null,r.a.createElement(y.j,null,r.a.createElement(y.z,null,r.a.createElement(y.i,null,n.state.currentEntry.total<0?"-":"","\xa3"+Math.abs(n.state.currentEntry.total).toFixed(2))),r.a.createElement(y.z,null,r.a.createElement(y.h,null,n.state.currentEntry.date))),r.a.createElement(y.j,null,n.renderSegment()),r.a.createElement(y.j,null,r.a.createElement(y.z,{"justify-content-end":!0},r.a.createElement(y.i,null,n.state.totalSaved<0?"-":"","\xa3"+Math.abs(n.state.totalSaved).toFixed(2))),r.a.createElement(y.z,{"justify-content-end":!0},r.a.createElement(y.h,null,"Total Saved"))))},n.state={isMobile:Object($.d)(window,"mobile"),label:"Month",expenses:n.props.state.monthsExpenses,totalSaved:n.props.state.monthsTotal,currentEntry:n.props.state.monthsExpenses[n.props.state.monthsExpenses.length-1]||{total:0,date:""}},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.state.monthsExpenses!==e.state.monthsExpenses&&this.setState({label:"Month",expenses:this.props.state.monthsExpenses,totalSaved:this.props.state.monthsTotal,currentEntry:this.props.state.monthsExpenses[this.props.state.monthsExpenses.length-1]||{total:0,date:""}})}},{key:"render",value:function(){return r.a.createElement(y.e,null,r.a.createElement(y.g,null,r.a.createElement(y.i,null,"Your ",this.state.label," Summary")),r.a.createElement(y.f,null,r.a.createElement(y.o,{id:"expense-summary"},r.a.createElement(y.z,null,r.a.createElement(y.j,null,r.a.createElement(V,{data:this.state.expenses,onClick:this.chartClicked}))),this.state.isMobile?this.renderMobile():this.renderDesktop())))}}]),t}(a.Component),X=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).add=function(){n.props.history.push("/add")},n.view=function(e){n.props.history.push({pathname:"/add",state:{expense:e}})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.actions.loadExpenses()}},{key:"render",value:function(){return r.a.createElement(y.k,null,this.props.state.expenses.length>0&&r.a.createElement(Q,{state:this.props.state,actions:this.props.actions}),r.a.createElement(N,{expenses:this.props.state.expenses,viewExpense:this.view,appLoading:this.props.state.loadingExpenses}),r.a.createElement(G,{icon:"add",onClick:this.add,appLoading:this.props.state.loadingExpenses}),r.a.createElement(y.a,{isOpen:this.props.state.loadFailed,onDidDismiss:function(){},header:"Failed to load expenses",message:"Please check your internet connection.",backdropDismiss:!1,buttons:[{text:"Logout",handler:this.props.actions.logoutUser},{text:"Retry",handler:this.props.actions.loadExpenses}]}))}}]),t}(a.Component),Z=n(33),ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).updateIcon=function(e){n.setState({selectedIcon:e.detail.value}),n.props.updateIcon(e)},n.state={selectedIcon:n.props.icon},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"renderOptions",value:function(){for(var e=[],t=Object.keys(L),n=0;n<t.length;n++)e.push(r.a.createElement(y.D,{key:n,value:t[n]},t[n]));return e}},{key:"render",value:function(){return r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Icon"),r.a.createElement(y.q,{size:"large",slot:"start",icon:q(this.state.selectedIcon)}),r.a.createElement(y.C,{onIonChange:this.updateIcon,interface:"popover",value:this.state.selectedIcon},this.renderOptions()))}}]),t}(a.Component),te=n(61),ne=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).slideRef=void 0,n.updateTitle=function(e){n.props.expense.title=e.detail.value},n.updateIsSaving=function(e){n.props.expense.isSaving=e.detail.value},n.updateIcon=function(e){n.props.expense.icon=e.detail.value},n.updatePrice=function(e){n.props.expense.price=parseFloat(e.detail.value)},n.updateDate=function(e){var t=new Date(e.detail.value);n.props.expense.date=t.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})},n.segmentChanged=function(e){n.slideRef.current.slideTo(e.target.value)},n.slideRef=r.a.createRef(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.e,null,r.a.createElement(y.g,null,r.a.createElement(y.i,null,"Add an Expense or Saving")),r.a.createElement(y.f,null,r.a.createElement(te.a,null,r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Title"),r.a.createElement(y.r,{required:!0,onIonChange:this.updateTitle,value:this.props.expense.title})),r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Amount"),r.a.createElement(y.r,{type:"number",inputMode:"numeric",required:!0,onIonChange:this.updatePrice,value:Math.abs(this.props.expense.price).toFixed(2)})),r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Type"),r.a.createElement(y.C,{onIonChange:this.updateIsSaving,interface:"popover",value:this.props.expense.isSaving},r.a.createElement(y.D,{key:0,value:!1},"Expense"),r.a.createElement(y.D,{key:1,value:!0},"Saving"))),r.a.createElement(ee,{icon:this.props.expense.icon,updateIcon:this.updateIcon}),r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Date"),r.a.createElement(y.l,{displayFormat:"DD MMM YYYY",onIonChange:this.updateDate,value:new Date(this.props.expense.date).toISOString()})))))}}]),t}(a.Component),ae=n(623),re=n(624),se=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).save=function(){n.props.save()},n.delete=function(){n.props.delete()},n.showWarning=function(){n.setState({showWarning:!0})},n.hideWarning=function(){n.setState({showWarning:!1})},n.state={showWarning:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.m,{vertical:"bottom",horizontal:"end",slot:"fixed"},r.a.createElement(y.c,{color:"primary",onClick:this.save},r.a.createElement(y.q,{slot:"start",icon:ae.a}),"Save"),this.props.delete&&r.a.createElement("span",null,r.a.createElement(y.c,{color:"danger",onClick:this.showWarning},r.a.createElement(y.q,{icon:re.a})),r.a.createElement(y.a,{isOpen:this.state.showWarning,onDidDismiss:this.hideWarning,header:"Delete Expense",message:"Are you sure you want to delete this expense?",buttons:[{text:"No",cssClass:"secondary"},{text:"Yes",handler:this.delete}]})))}}]),t}(a.Component),oe=Object(f.g)(se),ie=n(41),le=n.n(ie),ce=n(269),ue="money_tracker",pe="token",de="username";function me(){var e="UNDEFINED";return Y&&Y.get(pe).then(function(t){return e=t},function(e){return console.log(e)}),e}function he(){(new ce.a).create(ue).then(function(e){Y=e})}var fe=n(273),ye="token",Ee="username",ge={sameSite:"strict"},ve=new fe.a;function be(){return ve.get(ye)}function je(e){var t,n;console.log("Storing user details : "+e.token),Object($.d)("ios")?(n=e.token,Y||he(),Y.set(pe,n).then(function(e){return console.log(e)},function(e){return console.log(e)}),t=e.email,Y||he(),Y.set(de,t).then(function(e){return console.log(e)},function(e){return console.log(e)})):(function(e){ve.set(ye,e,ge)}(e.token),function(e){ve.set(Ee,e,ge)}(e.email))}function we(){Object($.d)("ios")?Y.clear().then(function(e){return console.log(e)},function(e){return console.log(e)}):(ve.remove(ye),ve.remove(Ee))}function Oe(){var e;return Object($.d)("ios")?e=me():(e=be(),console.log("Is not ios or android: "+e)),{headers:{Authorization:"Bearer ".concat(e)}}}function xe(){return Object($.d)("ios")?function(){var e="UNDEFINED";return Y&&Y.get(de).then(function(t){return e=t},function(e){return console.log(e)}),e}():ve.get(Ee)}var ke="https://api-dot-money-tracker-249719.appspot.com/api/expenses";function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(n,!0).forEach(function(t){Object(Z.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ce=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).updateSuccessful=function(){n.setState({updatingExpenses:!1}),n.props.history.push("/")},n.updateFailed=function(e){n.setState({updatingExpenses:!1,updateFailed:!0})},n.createExpense=function(){var e=Pe({},n.state.expense);e.userID=n.props.state.user.email,n.setState({expense:e,updatingExpenses:!0}),function(e,t,n){var a=Oe();le.a.post(ke,JSON.stringify(e),a).then(function(e){e.status>=200&&e.status<=300?t(e.data):n(e.data)}).catch(function(e){return n(e)})}(n.state.expense,n.updateSuccessful,n.updateFailed)},n.updateExpense=function(){n.setState({updatingExpenses:!0}),function(e,t,n){var a=Oe();le.a.put(ke,JSON.stringify(e),a).then(function(e){e.status>=200&&e.status<=300?t(e.data):n(e.data)}).catch(function(e){return n(e)})}(n.state.expense,n.updateSuccessful,n.updateFailed)},n.deleteExpense=function(){n.setState({updatingExpenses:!0}),function(e,t,n){var a=Oe();le.a.delete(ke+"/"+e,a).then(function(e){e.status>=200&&e.status<=300?t(e.data):n(e.data)}).catch(function(e){return n(e)})}(n.state.expense.id,n.updateSuccessful,n.updateFailed)};var a=n.props.state.defaultExpense;return n.props.location.state&&(a=n.props.location.state.expense),n.state={expense:Pe({},a||n.props.state.defaultExpense),updatingExpenses:!1,updateFailed:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(y.k,null,r.a.createElement(ne,{expense:this.state.expense}),this.state.expense.id?r.a.createElement(oe,{save:this.updateExpense,delete:this.deleteExpense}):r.a.createElement(oe,{save:this.createExpense}),r.a.createElement(y.w,{isOpen:this.state.updatingExpenses,onDidDismiss:function(){e.setState({updatingExpenses:!1})},message:"Saving...",duration:500}),r.a.createElement(y.a,{isOpen:this.state.updateFailed,onDidDismiss:function(){e.setState({updateFailed:!1})},header:"Failed to update expense",message:"Please check your internet connection.",backdropDismiss:!1,buttons:["Okay"]}))}}]),t}(a.Component),De=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).loginUser=function(){if(n.validateEmail()&&n.validatePassword()){var e={email:n.state.email,password:n.state.password};n.props.actions.loginUser(e)}},n.registerUser=function(){n.props.history.push("/register")},n.onKeyPress=function(e){13===e.which&&n.loginUser()},n.updateEmail=function(e){n.setState({email:e.detail.value})},n.validateEmail=function(){return n.state.email.includes("@")?(n.setState({errorMessage:"",validEmail:!0}),!0):(n.setState({errorMessage:"Email must atleast contain '@'",validEmail:!1}),!1)},n.updatePassword=function(e){n.setState({password:e.detail.value})},n.validatePassword=function(){return n.state.password.length<6?(n.setState({errorMessage:"Password must be atleast 6 characters long",validPassword:!1}),!1):(n.setState({errorMessage:"",validPassword:!0}),!0)},n.state={email:"",validEmail:!1,password:"",validPassword:!1,errorMessage:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.state.isAuthenticated?r.a.createElement(f.a,{to:"/"}):r.a.createElement(y.k,null,r.a.createElement(y.e,null,r.a.createElement(y.g,null,r.a.createElement(y.i,null,"Login"),r.a.createElement(y.h,{color:"danger"},this.props.state.loginError),r.a.createElement(y.h,{color:"danger"},this.state.errorMessage)),r.a.createElement(y.f,null,r.a.createElement(te.a,{onSubmit:this.loginUser,onKeyPress:this.onKeyPress},r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Email"),r.a.createElement(y.r,{required:!0,type:"email",inputMode:"email",onIonChange:this.updateEmail,onIonBlur:this.validateEmail,value:this.state.email})),r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Password"),r.a.createElement(y.r,{required:!0,type:"password",inputMode:"password",onIonChange:this.updatePassword,onIonBlur:this.validatePassword,value:this.state.password})),r.a.createElement(y.c,{expand:"block",type:"submit",disabled:!!this.props.state.loggingIn},this.props.state.loggingIn?r.a.createElement(y.E,null):"Login"),r.a.createElement(y.c,{expand:"block",fill:"clear",size:"small",onClick:this.registerUser,disabled:!!this.props.state.loggingIn},"Register")))))}}]),t}(a.Component),Me=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).registerUser=function(){if(n.validateEmail()&&n.validatePassword()&&n.validateConfirmPassword()){if(n.state.password!==n.state.confirmPassword)return void n.setState({errorMessage:"Passwords don't match"});var e={email:n.state.email,password:n.state.password};n.props.actions.createUser(e)}},n.onKeyPress=function(e){13===e.which&&n.registerUser()},n.updateEmail=function(e){n.setState({email:e.detail.value})},n.validateEmail=function(){return n.state.email.includes("@")?(n.setState({errorMessage:"",validEmail:!0}),!0):(n.setState({errorMessage:"Email must atleast contain '@'",validEmail:!1}),!1)},n.updatePassword=function(e){n.setState({password:e.detail.value})},n.validatePassword=function(){return n.state.password.length<6?(n.setState({errorMessage:"Password must be atleast 6 characters long",validPassword:!1}),!1):(n.setState({errorMessage:"",validPassword:!0}),!0)},n.updateConfirmPassword=function(e){n.setState({confirmPassword:e.detail.value})},n.validateConfirmPassword=function(){return n.state.confirmPassword.length<6?(n.setState({errorMessage:"Confirm Password must be atleast 6 characters long",validConfirmPassword:!1}),!1):(n.setState({errorMessage:"",validConfirmPassword:!0}),!0)},n.state={email:"",validEmail:!1,password:"",validPassword:!1,confirmPassword:"",validConfirmPassword:!1,errorMessage:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.state.isAuthenticated?r.a.createElement(f.a,{to:"/"}):r.a.createElement(y.k,null,r.a.createElement(y.e,null,r.a.createElement(y.g,null,r.a.createElement(y.i,null,"Register"),r.a.createElement(y.h,{color:"danger"},this.state.errorMessage)),r.a.createElement(y.f,null,r.a.createElement(te.a,{onSubmit:this.registerUser,onKeyPress:this.onKeyPress},r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Email"),r.a.createElement(y.r,{required:!0,type:"email",inputMode:"email",onIonChange:this.updateEmail,onIonBlur:this.validateEmail,value:this.state.email})),r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Password"),r.a.createElement(y.r,{required:!0,type:"password",inputMode:"password",onIonChange:this.updatePassword,onIonBlur:this.validatePassword,value:this.state.password})),r.a.createElement(y.s,null,r.a.createElement(y.t,{position:"floating"},"Confirm Password"),r.a.createElement(y.r,{required:!0,type:"password",inputMode:"password",onIonChange:this.updateConfirmPassword,onIonBlur:this.validateConfirmPassword,value:this.state.confirmPassword})),r.a.createElement(y.c,{expand:"block",type:"submit",disabled:!!this.props.state.loggingIn},this.props.state.loggingIn?r.a.createElement(y.E,null):"Create Account")))))}}]),t}(a.Component),Ie=(n(509),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).back=function(){n.props.history.push(n.props.backLink)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.m,{vertical:"bottom",horizontal:"end",slot:"fixed"},r.a.createElement(y.c,{onClick:this.back},r.a.createElement(y.t,null,"Back")))}}]),t}(a.Component)),_e=Object(f.g)(Ie),Fe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).viewPrivacyPolicy=function(){n.props.history.push("/privacypolicy")},n.showWarning=function(){n.setState({showWarning:!0})},n.hideWarning=function(){n.setState({showWarning:!1})},n.state={showWarning:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.k,null,r.a.createElement(y.e,null,r.a.createElement(y.g,null,r.a.createElement(y.i,null,"Settings")),r.a.createElement(y.f,null,r.a.createElement(y.c,{expand:"block",style:{"margin-bottom":"20px"},onClick:this.props.actions.logoutUser},"Logout"),r.a.createElement(y.c,{expand:"block",color:"danger",size:"small",onClick:this.showWarning,disabled:!!this.props.state.deletingUser},this.props.state.deletingUser?r.a.createElement(y.E,null):"Delete Account"),r.a.createElement(y.c,{expand:"block",fill:"clear",onClick:this.viewPrivacyPolicy},"View Privacy Policy"),r.a.createElement(y.a,{isOpen:this.state.showWarning,onDidDismiss:this.hideWarning,header:"Delete Account",message:"Are you sure you want to delete your account?",buttons:[{text:"No",cssClass:"secondary"},{text:"Yes",handler:this.props.actions.deleteUser}]}),r.a.createElement(y.a,{isOpen:this.props.state.deleteError,onDidDismiss:function(){},header:"Unable to Delete Account",message:this.props.state.deleteMessage,backdropDismiss:!1,buttons:[{text:"Cancel",cssClass:"secondary"},{text:"Retry",handler:this.props.actions.deleteUser}]}))),r.a.createElement(_e,{backLink:"/"}))}}]),t}(a.Component),Ue=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.k,null,r.a.createElement(y.e,null,r.a.createElement(y.g,null,r.a.createElement(y.i,null,"Privacy Policy")),r.a.createElement(y.f,null,r.a.createElement("p",null,"Your privacy is important to us. It is Money Tracker's policy to respect your privacy regarding any information we may collect from you across our website, ",r.a.createElement("a",{href:"https://money-tracker-249719.appspot.com/"},"https://money-tracker-249719.appspot.com/"),", and other sites we own and operate."),r.a.createElement("p",null,"We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why we\u2019re collecting it and how it will be used."),r.a.createElement("p",null,"We only retain collected information for as long as necessary to provide you with your requested service. What data we store, we\u2019ll protect within commercially acceptable means to prevent loss and theft, as well as unauthorised access, disclosure, copying, use or modification."),r.a.createElement("p",null,"We don\u2019t share any personally identifying information publicly or with third-parties, except when required to by law."),r.a.createElement("p",null,"Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies."),r.a.createElement("p",null,"You are free to refuse our request for your personal information, with the understanding that we may be unable to provide you with some of your desired services."),r.a.createElement("p",null,"Your continued use of our website will be regarded as acceptance of our practices around privacy and personal information. If you have any questions about how we handle user data and personal information, feel free to contact us."),r.a.createElement("p",null,"This policy is effective as of 15 August 2019."),r.a.createElement("p",null,"Generated by ",r.a.createElement("a",{title:"Privacy Policy Template Generator",href:"https://getterms.io/"},"GetTerms.io")))),r.a.createElement(_e,{backLink:"/settings"}))}}]),t}(a.Component),We=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).state=e.states(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.states.map(function(t){return e.setState(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement(y.b,null,r.a.createElement(y.y,{id:"page"},r.a.createElement(j,{title:"Money Tracker",isAuthenticated:this.state.isAuthenticated,actions:this.props.actions}),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/login",render:function(t){return r.a.createElement(De,Object.assign({},t,{state:e.state,actions:e.props.actions}))}}),r.a.createElement(f.b,{path:"/register",render:function(t){return r.a.createElement(Me,Object.assign({},t,{state:e.state,actions:e.props.actions}))}}),r.a.createElement(f.b,{path:"/privacypolicy",render:function(t){return r.a.createElement(Ue,Object.assign({},t,{state:e.state,actions:e.props.actions}))}}),r.a.createElement(g,{path:"/add",component:Ce,isAuthenticated:this.state.isAuthenticated,state:this.state,actions:this.props.actions}),r.a.createElement(g,{path:"/settings",component:Fe,isAuthenticated:this.state.isAuthenticated,state:this.state,actions:this.props.actions}),r.a.createElement(g,{component:X,isAuthenticated:this.state.isAuthenticated,state:this.state,actions:this.props.actions})))))}}]),t}(a.Component),Ae=new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),Te=n(272);function ze(e){var t=0;return e.forEach(function(e){t+=e.total}),t}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(n,!0).forEach(function(t){Object(Z.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qe=function(){return{loadingExpenses:!1,loadFailed:!1,expenses:[],weeksExpenses:[],monthsExpenses:[],yearsExpenses:[],weeksTotal:0,monthsTotal:0,yearsTotal:0,defaultExpense:{id:"",title:"",price:0,isSaving:!1,icon:"Cafe",date:Ae.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}}},Ye=function(e){return{loadExpenses:function(){return e(function(t){return function(e,t){var n=Oe();le.a.get(ke,n).then(function(n){n.status>=200&&n.status<=300?e(n.data):t(n.data)}).catch(function(e){return t(e)})}(Je.actions(e).updateExpenseList,Je.actions(e).loadFailed),Le({},t,{loadingExpenses:!0,loadFailed:!1})})},updateExpenseList:function(t){return e(function(e){var n=[],a=[],r=[],s=[],o=[];return t&&((n=Object(Te.a)(t)).sort(function(e,t){var n=new Date(e.date);return+new Date(t.date)-+n}),r=function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()-7),e.filter(function(e){return new Date(e.date)>=t})}(a=function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var s,o=function(){var e=s.value,n=t.find(function(t){return t.date===e.date});n?n.total+=e.isSaving?e.price:-e.price:t.push({date:e.date,total:e.isSaving?e.price:-e.price})},i=e[Symbol.iterator]();!(n=(s=i.next()).done);n=!0)o()}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t.sort(function(e,t){return+new Date(e.date)-+new Date(t.date)}),t}(n)),s=function(e){var t=new Date;return t.setHours(0,0,0,0),t.setMonth(t.getMonth()-1),e.filter(function(e){return new Date(e.date)>=t})}(a),o=function(e){var t=new Date;return t.setHours(0,0,0,0),t.setMonth(t.getMonth()-12),e.filter(function(e){return new Date(e.date)>=t})}(a)),Le({},e,{loadingExpenses:!1,expenses:n,weeksExpenses:r,monthsExpenses:s,yearsExpenses:o,weeksTotal:ze(r),monthsTotal:ze(s),yearsTotal:ze(o)})})},loadFailed:function(){return e(function(e){return Le({},e,{loadingExpenses:!1,loadFailed:!0})})}}},Ne="https://api-dot-money-tracker-249719.appspot.com/api/user";function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(n,!0).forEach(function(t){Object(Z.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ge=function(){return{user:{email:xe()||"",password:""},loginError:"",deleteError:!1,deleteMessage:"",isAuthenticated:!(Object($.d)("ios")?!me():!be())}},He=function(e){return{loginUser:function(t){return e(function(n){return function(e,t,n){le.a.post(Ne+"/login",e).then(function(e){e.status>=200&&e.status<=300?t(e.data):n(e.data)}).catch(function(e){return n(e)})}(t,Je.actions(e).loginSuccessful,Je.actions(e).loginFailed),Ke({},n,{user:Ke({},t),loggingIn:!0})})},createUser:function(t){return e(function(n){return function(e,t,n){le.a.post(Ne+"/new",e).then(function(e){e.status>=200&&e.status<=300?t(e.data):n(e.data)}).catch(function(e){return n(e)})}(t,Je.actions(e).loginSuccessful,Je.actions(e).loginFailed),Ke({},n,{user:Ke({},t),loggingIn:!0})})},deleteUser:function(){return e(function(t){return function(e,t){var n=Oe();le.a.delete(Ne+"/delete",n).then(function(n){n.status>=200&&n.status<=300?e(n.data):t(n.data)}).catch(function(e){return t(e)})}(Je.actions(e).logoutUser,Je.actions(e).deleteFailed),Ke({},t,{deleteError:!1,deleteMessage:"",deletingUser:!0})})},loginSuccessful:function(t){return e(function(e){return je(t),Ke({},e,{loginError:"",isAuthenticated:!0,loggingIn:!1})})},loginFailed:function(t){return e(function(e){we();var n="Unable to contact server, please try again";return t&&t.response&&t.response.data&&(n=t.response.data.error),Ke({},e,{loginError:n,loggingIn:!1})})},deleteFailed:function(t){return e(function(e){var n="Unable to contact server, please try again";return t&&t.response&&t.response.data&&(n=t.response.data.error),Ke({},e,{deleteError:!0,deleteMessage:n,deletingUser:!1})})},logoutUser:function(){return e(function(e){return we(),Ke({},e,{user:{},isAuthenticated:!1,deleteError:!1,deleteMessage:"",deletingUser:!1})})}}},Je={initialState:function(){return Object.assign({},qe(),Ge())},actions:function(e){return Object.assign({},Ye(e),He(e))}},Ve=l.a.stream(),$e=l.a.scan(function(e,t){return t(e)},Je.initialState(),Ve),Qe=Je.actions(Ve);o.a.render(r.a.createElement(We,{states:$e,actions:Qe}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[300,9,10]]]);
//# sourceMappingURL=main.aa2ea6f4.chunk.js.map